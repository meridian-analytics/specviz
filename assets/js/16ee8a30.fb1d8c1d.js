"use strict";(self.webpackChunk_meridian_analytics_specviz_website=self.webpackChunk_meridian_analytics_specviz_website||[]).push([[20],{9409:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>a,toc:()=>l});var i=s(1085),c=s(1184);const t={sidebar_position:2},d="Development",a={id:"guides/development",title:"Development",description:"The Specviz monorepo contains the core library and documentation website, as well as many individual example starter application packages.",source:"@site/docs/guides/development.mdx",sourceDirName:"guides",slug:"/guides/development",permalink:"/specviz/docs/guides/development",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"mainSidebar",previous:{title:"Get Started",permalink:"/specviz/docs/guides/get-started"},next:{title:"CSS Styling",permalink:"/specviz/docs/guides/css-styling"}},r={},l=[{value:"Runtime and Dependencies",id:"runtime-and-dependencies",level:3},{value:"Examples",id:"examples",level:3},{value:"Linter and Formatter",id:"linter-and-formatter",level:3},{value:"TypeScript Compiler",id:"typescript-compiler",level:3},{value:"Test",id:"test",level:3},{value:"Build",id:"build",level:3},{value:"Release",id:"release",level:3}];function o(e){const n={a:"a",code:"code",h1:"h1",h3:"h3",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,c.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"development",children:"Development"})}),"\n",(0,i.jsx)(n.p,{children:"The Specviz monorepo contains the core library and documentation website, as well as many individual example starter application packages."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-none",children:".\n\u251c\u2500\u2500 biome.json\n\u251c\u2500\u2500 bun.lockb\n\u251c\u2500\u2500 examples\n\u2502   \u251c\u2500\u2500 advanced-annotation\n\u2502   \u251c\u2500\u2500 basic-annotation\n\u2502   \u251c\u2500\u2500 basic-audio\n\u2502   \u251c\u2500\u2500 basic-spectrogram\n\u2502   \u2514\u2500\u2500 interactive-spectrogram\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 packages\n\u2502   \u251c\u2500\u2500 specviz\n\u2502   \u2514\u2500\u2500 website\n\u2502       \u2514\u2500\u2500 static\n\u251c\u2500\u2500 readme.md\n\u2514\u2500\u2500 tsconfig.json\n"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Path"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"biome.json"})}),(0,i.jsxs)(n.td,{children:["shared ",(0,i.jsx)(n.a,{href:"https://biomejs.dev",children:"Biome"})," configuration"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"bun.lockb"})}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.a,{href:"https://bun.sh",children:"Bun"})," dependency lock file (binary)"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"examples"})}),(0,i.jsx)(n.td,{children:"example projects"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"examples/*"})}),(0,i.jsx)(n.td,{children:"individual starter package"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"package.json"})}),(0,i.jsx)(n.td,{children:"monorepo entry and scripts"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"packages"})}),(0,i.jsx)(n.td,{children:"monorepo packages"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"packages/specviz"})}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.a,{href:"/specviz/docs/api/specviz",children:"Specviz"})," package"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"packages/website"})}),(0,i.jsx)(n.td,{children:"Specviz documentation website \u2b50\ufe0f YOU ARE HERE"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"packages/website/static"})}),(0,i.jsx)(n.td,{children:"spectrogram, waveform, audio, and other static assets"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"readme.md"})}),(0,i.jsx)(n.td,{children:"offline information and instructions"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"tsconfig.json"})}),(0,i.jsxs)(n.td,{children:["shared ",(0,i.jsx)(n.a,{href:"https://www.typescriptlang.org",children:"TypeScript"})," configuration"]})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"runtime-and-dependencies",children:"Runtime and Dependencies"}),"\n",(0,i.jsxs)(n.p,{children:["After installing the ",(0,i.jsx)(n.a,{href:"https://bun.sh",children:"bun"})," JavaScript runtime and package manager, install the development dependencies."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"$ bun install\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-none",children:"bun install v1.1.29 (6d43b366)\n\n1116 packages installed [3.77s]\n\nBlocked 3 postinstalls. Run `bun pm untrusted` for details.\n"})}),"\n",(0,i.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,i.jsxs)(n.p,{children:["To run a starter project, change to the example's directory and run the ",(0,i.jsx)(n.code,{children:"dev"})," script."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"$ cd examples/advanced-annotation\n$ bun run dev\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The example webserver will display the connection URL. In the default case, ",(0,i.jsx)(n.a,{href:"http://localhost:5173",children:"http://localhost:5173"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-none",children:"VITE v5.4.8  ready in 205 ms\n\n\u279c  Local:   http://localhost:5173/\n\u279c  Network: use --host to expose\n\u279c  press h to show help\n"})}),"\n",(0,i.jsx)(n.h3,{id:"linter-and-formatter",children:"Linter and Formatter"}),"\n",(0,i.jsx)(n.p,{children:"Run the linter and formatter."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"$ bun run check\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-none",children:"@meridian-analytics/specviz-example-basic-audio check $ biome check --write .\n\u2502 Checked 6 files in 20ms. No fixes applied.\n\u2514\u2500 Done in 576 ms\n@meridian-analytics/specviz-example-basic-spectrogram check $ biome check --write .\n\u2502 Checked 6 files in 21ms. No fixes applied.\n\u2514\u2500 Done in 576 ms\n@meridian-analytics/specviz-example-interactive-spectrogram check $ biome check --write .\n\u2502 Checked 6 files in 20ms. No fixes applied.\n\u2514\u2500 Done in 575 ms\n@meridian-analytics/specviz-example-advanced-annotation check $ biome check --write .\n\u2502 Checked 6 files in 32ms. No fixes applied.\n\u2514\u2500 Done in 586 ms\n@meridian-analytics/specviz-example-basic-annotation check $ biome check --write .\n\u2502 Checked 6 files in 23ms. No fixes applied.\n\u2514\u2500 Done in 577 ms\n@meridian-analytics/specviz check $ biome check --write .\n\u2502 Checked 25 files in 27ms. No fixes applied.\n\u2514\u2500 Done in 580 ms\n@meridian-analytics/specviz-website check $ biome check --write .\n\u2502 Checked 11 files in 20ms. No fixes applied.\n\u2514\u2500 Done in 575 ms\n"})}),"\n",(0,i.jsx)(n.h3,{id:"typescript-compiler",children:"TypeScript Compiler"}),"\n",(0,i.jsx)(n.p,{children:"Run compiler for all packages."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"$ bun run tsc\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-none",children:"@meridian-analytics/specviz-example-basic-audio tsc $ tsc\n\u2514\u2500 Done in 949 ms\n@meridian-analytics/specviz-example-basic-spectrogram tsc $ tsc\n\u2514\u2500 Done in 1.31 s\n@meridian-analytics/specviz-example-interactive-spectrogram tsc $ tsc\n\u2514\u2500 Done in 1.32 s\n@meridian-analytics/specviz-example-advanced-annotation tsc $ tsc\n\u2514\u2500 Done in 1.12 s\n@meridian-analytics/specviz-example-basic-annotation tsc $ tsc\n\u2514\u2500 Done in 1.39 s\n@meridian-analytics/specviz tsc $ tsc\n\u2514\u2500 Done in 1.48 s\n@meridian-analytics/specviz-website tsc $ tsc\n\u2514\u2500 Done in 1.21 s\n"})}),"\n",(0,i.jsx)(n.h3,{id:"test",children:"Test"}),"\n",(0,i.jsx)(n.p,{children:"Run tests for all packages."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"$ bun run test\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-none",children:"@meridian-analytics/specviz test $ vitest run\n\u2502 \n\u2502  RUN  v2.1.3 ./meridian/specviz-react/packages/specviz\n\u2502 \n\u2502  \u2713 test/_axis.test.ts  (12 tests) 4ms\n\u2502 \n\u2502  Test Files  1 passed (1)\n\u2502       Tests  12 passed (12)\n\u2502    Start at  10:44:44\n\u2502    Duration  212ms (transform 31ms, setup 0ms, collect 30ms, tests 4ms, environment 0ms, prepare 32ms)\n\u2514\u2500 Done in 833 ms\n"})}),"\n",(0,i.jsx)(n.h3,{id:"build",children:"Build"}),"\n",(0,i.jsxs)(n.p,{children:["To build the specviz package, run the ",(0,i.jsx)(n.code,{children:"build"})," script."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"$ cd packages/specviz\n$ bun run build\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-none",children:"$ vite build && tsc --project tsconfig.build.json\nvite v5.4.10 building for production...\n\u2713 22 modules transformed.\ndist/math.js                0.14 kB \u2502 gzip: 0.13 kB \u2502 map:  0.31 kB\ndist/plane.js               0.17 kB \u2502 gzip: 0.15 kB \u2502 map:  0.09 kB\ndist/action.js              0.17 kB \u2502 gzip: 0.15 kB \u2502 map:  0.09 kB\ndist/input.js               0.21 kB \u2502 gzip: 0.16 kB \u2502 map:  0.09 kB\ndist/viewport.js            0.27 kB \u2502 gzip: 0.20 kB \u2502 map:  0.10 kB\ndist/audio.js               0.31 kB \u2502 gzip: 0.22 kB \u2502 map:  0.10 kB\ndist/hooks.js               0.35 kB \u2502 gzip: 0.23 kB \u2502 map:  0.10 kB\ndist/note.js                0.42 kB \u2502 gzip: 0.27 kB \u2502 map:  0.10 kB\ndist/vector2.js             0.49 kB \u2502 gzip: 0.27 kB \u2502 map:  1.23 kB\ndist/axis.js                0.52 kB \u2502 gzip: 0.30 kB \u2502 map:  0.10 kB\ndist/coord.js               0.61 kB \u2502 gzip: 0.23 kB \u2502 map:  1.37 kB\ndist/format.js              0.63 kB \u2502 gzip: 0.36 kB \u2502 map:  1.30 kB\ndist/action-D-gLVGuD.js     0.71 kB \u2502 gzip: 0.39 kB \u2502 map:  1.10 kB\ndist/rect.js                1.12 kB \u2502 gzip: 0.45 kB \u2502 map:  2.68 kB\ndist/keybinds.js            1.78 kB \u2502 gzip: 0.57 kB \u2502 map:  3.37 kB\ndist/svg.js                 2.12 kB \u2502 gzip: 0.59 kB \u2502 map:  4.52 kB\ndist/input-Cvi9e0Nf.js      2.30 kB \u2502 gzip: 0.79 kB \u2502 map:  4.59 kB\ndist/viewport-XCdCEv4z.js   4.75 kB \u2502 gzip: 1.27 kB \u2502 map:  9.38 kB\ndist/audio-Cwwi9c8m.js      6.41 kB \u2502 gzip: 1.85 kB \u2502 map: 11.94 kB\ndist/index.js              12.56 kB \u2502 gzip: 2.93 kB \u2502 map: 22.20 kB\ndist/note-BapyeAcs.js      14.28 kB \u2502 gzip: 3.06 kB \u2502 map: 27.46 kB\ndist/axis-mPWX3U0x.js      15.76 kB \u2502 gzip: 3.82 kB \u2502 map: 30.92 kB\n\u2713 built in 136ms\n"})}),"\n",(0,i.jsx)(n.h3,{id:"release",children:"Release"}),"\n",(0,i.jsx)(n.p,{children:"The Specviz package is released using the following process."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Step"}),(0,i.jsx)(n.th,{children:"Description"}),(0,i.jsx)(n.th,{children:"Command"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"1."}),(0,i.jsx)(n.td,{children:"Run the linter and formatter"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"bun run check"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"2."}),(0,i.jsx)(n.td,{children:"Run the Specviz build script"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"bun run --cwd packages/specviz build"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"3."}),(0,i.jsx)(n.td,{children:"Run the package tests"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"bun run test"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"4."}),(0,i.jsx)(n.td,{children:"Run the TypeScript compiler"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"bun run tsc"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"5."}),(0,i.jsx)(n.td,{children:"Update the version field"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"vim packages/specviz/package.json"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"6."}),(0,i.jsx)(n.td,{children:"Commit the changes"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'git commit -m "version X.Y.Z"'})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"7."}),(0,i.jsx)(n.td,{children:"Tag the commit with version"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"git tag X.Y.Z"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"8."}),(0,i.jsx)(n.td,{children:"Push the commit and tag"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"git push && git push --tags"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"9."}),(0,i.jsxs)(n.td,{children:["Run the ",(0,i.jsx)(n.a,{href:"https://bun.sh/docs/cli/pm",children:"bun pm pack"})," command"]}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"bun pm --cwd packages/specviz pack"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"10."}),(0,i.jsxs)(n.td,{children:["Run the ",(0,i.jsx)(n.a,{href:"https://bun.sh/docs/cli/publish",children:"bun publish"})," command"]}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"bun publish packages/specviz/meridian-analytics-specviz-X.Y.Z.tgz"})})]})]})]}),"\n",(0,i.jsx)(n.p,{children:"To publish, you will need to be logged into npm."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"$ bunx npm login\n"})}),"\n",(0,i.jsx)(n.p,{children:"To see the current logged in user:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"$ bun pm whoami\n"})})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},1184:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>a});var i=s(4041);const c={},t=i.createContext(c);function d(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:d(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);